@tailwind base;
@tailwind components;
@tailwind utilities;

/* 中文字体应用 - 霞鹜文楷，如果加载失败则使用系统默认字体 */
@layer base {
	/* 全局字体设置，包含中文字体回退 */
	body,
	html {
		font-family: 'LXGW WenKai', '霞鹜文楷', 'STKaiti', 'KaiTi', '楷体', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Noto Sans CJK SC', 'Noto Sans CJK TC', sans-serif;
	}
	
	/* 代码块和等宽字体保持原样，不使用中文字体 */
	code,
	pre,
	[class*="font-mono"],
	.font-mono {
		font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace !important;
	}
	
	/* 确保字体平滑显示 */
	* {
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}
}

.hashnode-content-style{
    @apply prose prose-sm sm:prose-sm lg:prose-base break-words text-slate-950 first:prose-p:mt-0 prose-img:max-w-full prose-p:leading-snug prose-a:underline hover:prose-a:bg-primary-50 dark:hover:prose-a:text-primary-500 dark:hover:prose-a:bg-neutral-800 dark:text-neutral-50 prose-blockquote:leading-snug prose-a:leading-snug prose-figure:leading-snug prose-figcaption:leading-snug prose-pre:leading-snug prose-li:leading-snug prose-ul:leading-snug prose-ol:leading-snug prose-th:leading-snug prose-td:leading-snug dark:prose-invert dark:prose-pre:bg-neutral-900 first:prose-h1:mt-0 first:prose-h2:mt-0 first:prose-h3:mt-0 first:prose-h4:mt-0 first:prose-h5:mt-0;
}

/* 移动端图片优化 - 防止内容块被过度缩放 */
.hashnode-content-style img {
    max-width: 100%;
    height: auto;
    display: block;
    margin-left: auto;
    margin-right: auto;
}

/* 移动端大图片允许横向滚动，避免被过度缩小 */
@media (max-width: 640px) {
    /* 内容区域允许横向滚动，但不影响整体布局 */
    .hashnode-content-style {
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    /* 对于特别宽的图片容器（figure），允许横向滚动 */
    .hashnode-content-style figure {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        margin-left: -1rem;
        margin-right: -1rem;
        padding-left: 1rem;
        padding-right: 1rem;
        display: block;
    }
    
    .hashnode-content-style figure img {
        min-width: min(100%, 600px);
        max-width: none;
        width: auto;
    }
    
    /* 对于直接包含在段落中的大图片，也允许横向滚动 */
    .hashnode-content-style p {
        overflow-x: visible;
    }
    
    /* 确保大图片（如截图）保持最小可读宽度 */
    .hashnode-content-style img {
        min-width: 0;
    }
    
    /* 对于有明确宽度的图片（通常是嵌入的截图），保持其尺寸或允许滚动 */
    .hashnode-content-style img[width] {
        min-width: min(100%, 500px);
    }
}

/* Override to remove the backtick */
.hashnode-content-style :where(code):not(:where([class~="not-prose"],[class~="not-prose"] *))::before, .hashnode-content-style :where(code):not(:where([class~="not-prose"],[class~="not-prose"] *))::after  {
    content: none;
}

.prose code {
    border-radius: 0.25rem;
    font-weight: 400 !important;
    padding: 0.25rem;
    --tw-text-opacity: 1;
    color: rgba(0, 0, 0, var(--tw-text-opacity));
    font-size: 80%;
    background: #f0efed;
}
  
.dark .prose code {
    --tw-bg-opacity: 1;
    background-color: rgba(36, 41, 46, var(--tw-bg-opacity));
    --tw-text-opacity: 1;
    color: rgba(238, 238, 238, var(--tw-text-opacity));
}
  
.prose pre {
    padding-top: 2rem !important;
    padding-bottom: 2rem !important;
}
  
.prose pre code {
    background-color: transparent;
    border-radius: 0px;
    font-weight: 500 !important;
    padding: 0px;
    font-size: 100%;
    color: #fafafa;
}

.dark .prose pre code {
    background-color: transparent;
    color: #ddd;
}